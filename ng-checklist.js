// Generated by CoffeeScript 1.7.1
(function() {
  var app;

  app = angular.module('ng-checklist', []);

  app.directive('ngChecklist', function() {
    return {
      restrict: 'A',
      scope: {
        header: '@',
        entries: '='
      },
      templateUrl: 'ng-checklist.html',
      link: function($scope, $elem) {
        var checkedItemsCount, defaultHeight, entry, hidden, rootEl, showHideBtn, uncheckAllBtn, _i, _len, _ref;
        checkedItemsCount = 0;
        hidden = false;
        rootEl = $($elem[0]).find('.checklist');
        uncheckAllBtn = rootEl.find('.fa-ban');
        showHideBtn = rootEl.find('.showhide');
        defaultHeight = rootEl.height();
        _ref = $scope.entries;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          entry = _ref[_i];
          if (entry.checked) {
            checkedItemsCount++;
          }
        }
        $($elem[0]).find('.scrollable-content').slimScroll({
          alwaysVisible: true,
          height: '100%'
        });
        rootEl.resize(function() {
          if (rootEl.height() <= 32) {
            if (hidden) {
              return;
            }
            hidden = true;
            showHideBtn.removeClass('fa-chevron-circle-up');
            return showHideBtn.addClass('fa-chevron-circle-down');
          } else {
            if (!hidden) {
              return;
            }
            hidden = false;
            showHideBtn.removeClass('fa-chevron-circle-down');
            return showHideBtn.addClass('fa-chevron-circle-up');
          }
        });
        uncheckAllBtn.click(function() {
          return $scope.$apply(function() {
            var _j, _len1, _ref1, _results;
            _ref1 = $scope.entries;
            _results = [];
            for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
              entry = _ref1[_j];
              entry.checked = false;
              checkedItemsCount = 0;
              _results.push(uncheckAllBtn.removeClass('enabled'));
            }
            return _results;
          });
        });
        showHideBtn.click(function() {
          var listenToResize;
          listenToResize = false;
          if (!hidden) {
            rootEl.animate({
              height: '32px'
            }, {
              duration: 500,
              complete: function() {
                rootEl.css({
                  height: '32px'
                });
                return hidden = true;
              }
            });
            showHideBtn.removeClass('fa-chevron-circle-up');
            return showHideBtn.addClass('fa-chevron-circle-down');
          } else {
            rootEl.animate({
              height: defaultHeight + 'px'
            }, {
              duration: 500,
              complete: function() {
                rootEl.css({
                  height: defaultHeight + 'px'
                });
                return hidden = false;
              }
            });
            showHideBtn.removeClass('fa-chevron-circle-down');
            return showHideBtn.addClass('fa-chevron-circle-up');
          }
        });
        return $scope.toggle = function(entry) {
          entry.checked = !entry.checked;
          checkedItemsCount += entry.checked && 1 || -1;
          if (checkedItemsCount === 0) {
            uncheckAllBtn.removeClass('enabled');
          } else {
            uncheckAllBtn.addClass('enabled');
          }
          return true;
        };
      }
    };
  });

  app.controller('MainCtrl', function($scope) {
    return $scope.entries = [
      {
        "text": "Johnsonburg",
        "count": 21,
        "checked": false
      }, {
        "text": "Genoa",
        "count": 17,
        "checked": false
      }, {
        "text": "Ilchester",
        "count": 97,
        "checked": false
      }, {
        "text": "Taycheedah",
        "count": 11,
        "checked": false
      }, {
        "text": "Brule",
        "count": 71,
        "checked": false
      }, {
        "text": "Sandston",
        "count": 53,
        "checked": false
      }, {
        "text": "Shaft",
        "count": 72,
        "checked": false
      }, {
        "text": "Felt",
        "count": 80,
        "checked": false
      }, {
        "text": "Fairforest",
        "count": 38,
        "checked": false
      }, {
        "text": "Kohatk",
        "count": 27,
        "checked": false
      }, {
        "text": "Shepardsville",
        "count": 55,
        "checked": false
      }, {
        "text": "Balm",
        "count": 79,
        "checked": false
      }, {
        "text": "Ballico",
        "count": 23,
        "checked": false
      }, {
        "text": "Sisquoc",
        "count": 54,
        "checked": false
      }, {
        "text": "Crawfordsville",
        "count": 75,
        "checked": false
      }, {
        "text": "Coinjock",
        "count": 17,
        "checked": false
      }, {
        "text": "Breinigsville",
        "count": 13,
        "checked": false
      }, {
        "text": "Riviera",
        "count": 95,
        "checked": false
      }, {
        "text": "Sultana",
        "count": 63,
        "checked": false
      }, {
        "text": "Websterville",
        "count": 60,
        "checked": false
      }
    ];
  });

}).call(this);

//# sourceMappingURL=ng-checklist.map
